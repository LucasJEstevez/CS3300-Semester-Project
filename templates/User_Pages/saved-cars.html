{% extends "base.html" %}

{% block title %}Buy{% endblock %}

{% block content %}
<style>
    /* Simple styling for the table */
    table
    {
        width: 100%;
        border-collapse: collapse;
        margin-top: 20px;
        margin-left: 20px;
    }
    th, td
    {
        border: 1px solid #ddd;
        padding: 8px;
    }
    th
    {
        background-color: #f2f2f2;
        font-weight: bold;
    }
</style>

<html>

<body>
<!--Row of Dropdown Menus for Car Search-->
<div class="header">
    <div class="dropdown">
        <div onclick="myFunction('yearDrop')" class="dropbtn">Year</div>
        <div id="yearDrop" class="dropdown-content">
            <input type="text" placeholder="Search.." id="yearInput" onkeyup="filterFunction('yearDrop', 'yearInput')">
            <a href="#">2023</a>
            <a href="#">2022</a>
            <a href="#">2021</a>
            <a href="#">2020</a>
            <a href="#">2019</a>
            <a href="#">2018</a>
            <a href="#">2017</a>
            <a href="#">2016</a>
            <a href="#">2015</a>
            <a href="#">2014</a>
            <a href="#">2013</a>
            <a href="#">2012</a>
            <a href="#">2011</a>
            <a href="#">2010</a>
            <a href="#">2009</a>
            <a href="#">2008</a>
            <a href="#">2007</a>
            <a href="#">2006</a>
            <a href="#">2005</a>
            <a href="#">2004</a>
            <a href="#">2003</a>
            <a href="#">2002</a>
            <a href="#">2001</a>
            <a href="#">2000</a>
            <a href="#">1999</a>
            <a href="#">1998</a>
            <a href="#">1997</a>
            <a href="#">1996</a>
            <a href="#">1995</a>
        </div>
    </div>
    <div class="dropdown">
        <div onclick="myFunction('makeDrop')" class="dropbtn">Make</div>
        <div id="makeDrop" class="dropdown-content">
            <input type="text" placeholder="Search.." id="makeInput" onkeyup="filterFunction('makeDrop', 'makeInput')">
            <a href="#" onclick="filterModels('Honda')">Honda</a>
            <a href="#" onclick="filterModels('Toyota')">Toyota</a>
            <a href="#" onclick="filterModels('Ford')">Ford</a>
            <a href="#" onclick="filterModels('Honda')">Chevrolet</a>
            <a href="#" onclick="filterModels('Toyota')">BMW</a>
            <a href="#" onclick="filterModels('Ford')">Mercedes</a>
            <a href="#" onclick="filterModels('Honda')">Audi</a>
            <a href="#" onclick="filterModels('Toyota')">Nissan</a>
            <a href="#" onclick="filterModels('Ford')">Volkswagen</a>
            <a href="#" onclick="filterModels('Honda')">Hyundai</a>
            <a href="#" onclick="filterModels('Toyota')">Kia</a>
            <a href="#" onclick="filterModels('Ford')">Mazda</a>
            <a href="#" onclick="filterModels('Honda')">Lexus</a>
            <a href="#" onclick="filterModels('Toyota')">Subaru</a>
            <a href="#" onclick="filterModels('Ford')">Jeep</a>
            <a href="#" onclick="filterModels('Honda')">Chrysler</a>
            <a href="#" onclick="filterModels('Toyota')">Volvo</a>
            <a href="#" onclick="filterModels('Ford')">Acura</a>
            <a href="#" onclick="filterModels('Honda')">Lincoln</a>
            <a href="#" onclick="filterModels('Toyota')">Dodge</a>
        </div>
    </div>
    <div class="dropdown">
        <div onclick="myFunction('modelDrop')" class="dropbtn">Model</div>
        <div id="modelDrop" class="dropdown-content">
            <input type="text" placeholder="Search.." id="modelInput" onkeyup="filterFunction('modelDrop', 'modelInput')">
              <!-- Toyota -->
              <a href="#" data-make="Toyota">Corolla</a>
              <a href="#" data-make="Toyota">Camry</a>
              <a href="#" data-make="Toyota">Prius</a>
              <a href="#" data-make="Toyota">RAV4</a>
              <a href="#" data-make="Toyota">4Runner</a>
              <a href="#" data-make="Toyota">Highlander</a>
              <a href="#" data-make="Toyota">Land Cruiser</a>
              <a href="#" data-make="Toyota">Tacoma</a>
              <a href="#" data-make="Toyota">Avalon</a>

              <!-- Honda -->
              <a href="#" data-make="Honda">Civic</a>
              <a href="#" data-make="Honda">Accord</a>
              <a href="#" data-make="Honda">CR-V</a>
              <a href="#" data-make="Honda">Pilot</a>
              <a href="#" data-make="Honda">HR-V</a>
              <a href="#" data-make="Honda">Integra</a>

              <!-- Ford -->
              <a href="#" data-make="Ford">Fiesta</a>
              <a href="#" data-make="Ford">Mustang</a>
              <a href="#" data-make="Ford">Explorer</a>
              <a href="#" data-make="Ford">F-150</a>
              <a href="#" data-make="Ford">Focus</a>
              <a href="#" data-make="Ford">Escape</a>
              <a href="#" data-make="Ford">Ranger</a>
              <a href="#" data-make="Ford">Taurus</a>

              <!-- Chevrolet -->
              <a href="#" data-make="Chevrolet">Malibu</a>
              <a href="#" data-make="Chevrolet">Impala</a>
              <a href="#" data-make="Chevrolet">Equinox</a>
              <a href="#" data-make="Chevrolet">Tahoe</a>
              <a href="#" data-make="Chevrolet">Suburban</a>
              <a href="#" data-make="Chevrolet">Silverado</a>

              <!-- BMW -->
              <a href="#" data-make="BMW">3 Series</a>
              <a href="#" data-make="BMW">5 Series</a>
              <a href="#" data-make="BMW">X5</a>
              <a href="#" data-make="BMW">X3</a>

              <!-- Mercedes -->
              <a href="#" data-make="Mercedes">C-Class</a>
              <a href="#" data-make="Mercedes">E-Class</a>
              <a href="#" data-make="Mercedes">GLE</a>
              <a href="#" data-make="Mercedes">GLA</a>
              <a href="#" data-make="Mercedes">S-Class</a>

              <!-- Audi -->
              <a href="#" data-make="Audi">A4</a>
              <a href="#" data-make="Audi">A6</a>
              <a href="#" data-make="Audi">Q5</a>
              <a href="#" data-make="Audi">Q7</a>

              <!-- Nissan -->
              <a href="#" data-make="Nissan">Altima</a>
              <a href="#" data-make="Nissan">Maxima</a>
              <a href="#" data-make="Nissan">Rogue</a>
              <a href="#" data-make="Nissan">Murano</a>
              <a href="#" data-make="Nissan">Pathfinder</a>
              <a href="#" data-make="Nissan">Frontier</a>

              <!-- Volkswagen -->
              <a href="#" data-make="Volkswagen">Golf</a>
              <a href="#" data-make="Volkswagen">Passat</a>
              <a href="#" data-make="Volkswagen">Tiguan</a>
              <a href="#" data-make="Volkswagen">Atlas</a>
              <a href="#" data-make="Volkswagen">Jetta</a>

              <!-- Hyundai -->
              <a href="#" data-make="Hyundai">Elantra</a>
              <a href="#" data-make="Hyundai">Sonata</a>
              <a href="#" data-make="Hyundai">Tucson</a>
              <a href="#" data-make="Hyundai">Santa Fe</a>

              <!-- Kia -->
              <a href="#" data-make="Kia">Forte</a>
              <a href="#" data-make="Kia">K5</a>
              <a href="#" data-make="Kia">Sorento</a>
              <a href="#" data-make="Kia">Rio</a>

              <!-- Mazda -->
              <a href="#" data-make="Mazda">MX5</a>
              <a href="#" data-make="Mazda">CX-50</a>
              <a href="#" data-make="Mazda">CX-5</a>
              <a href="#" data-make="Mazda">CX-90</a>
              <a href="#" data-make="Mazda">3</a>

              <!-- Lexus -->
              <a href="#" data-make="Lexus">ES300</a>
              <a href="#" data-make="Lexus">GS</a>
              <a href="#" data-make="Lexus">GS350</a>
              <a href="#" data-make="Lexus">ES</a>
              <a href="#" data-make="Lexus">LS</a>
              <a href="#" data-make="Lexus">RX</a>

              <!-- Subaru -->
              <a href="#" data-make="Subaru">Outback</a>
              <a href="#" data-make="Subaru">Forester</a>
              <a href="#" data-make="Subaru">WRX</a>

              <!-- Jeep -->
              <a href="#" data-make="Jeep">Grand Cherokee</a>
              <a href="#" data-make="Jeep">Wrangler</a>

              <!-- Chrysler -->
              <a href="#" data-make="Chrysler">300</a>

              <!-- Volvo -->
              <a href="#" data-make="Volvo">XC90</a>

              <!-- Acura -->
              <a href="#" data-make="Acura">TL</a>

              <!-- Lincoln -->
              <a href="#" data-make="Lincoln">Navigator</a>

              <!-- Dodge -->
              <a href="#" data-make="Dodge">Durango</a>
        </div> 
    </div>  
        </div>
        <br>
        <h1>Hello there</h1>
        </div>
</div>

<!--<script src="../../static/CSS_Files/javafile.js"></script>-->

<div id="tableContainer"></div>

<!-- Load PapaParse from local file -->
<script src="../../static/PapaParse/papaparse.js"></script>
<script>
    window.onload = function() {
      const token = localStorage.getItem("access_token");
      let loggedIn = false;
      console.log("Token (if=false):",token);

      if (token) {
          console.log('Token (if=true):', token);
          fetch('/isValidToken', {
              method: "POST",
              headers: {
                  "Content-Type": "application/json",
                  "Authorization": `Bearer ${token}`
              },
              body: JSON.stringify({ token: token }) // Convert body to JSON string
          })
          .then(response => {
              if (!response.ok) {
                  throw new Error(`HTTP error! status: ${response.status}`);
              }
              return response.json();
          })
          .then(data => {
              console.log(data);
              if (data.isValid) {
                  loggedIn = true;
                  document.getElementById("welcome_header").innerHTML = `Welcome, ${data.username}!`;
              } else {
                  document.getElementById("welcome_header").innerHTML = 'Invalid token or user not found.';
              }
          })
          .catch(error => {
              console.error('Error during request:', error);
              document.getElementById("welcome_header").innerHTML = 'Request failed: ' + error.message;
          });
      } else {
          document.getElementById("welcome_header").innerHTML = 'No token found. Must be logged in to sell your car.';
      }
    }
    

</script>
</body>
</html>
{% endblock %}